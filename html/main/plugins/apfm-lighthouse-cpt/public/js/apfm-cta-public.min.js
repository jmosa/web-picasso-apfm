let masking={maskedInputs:document.querySelectorAll(".masked"),maskedNumber:"#dDmMyY9",maskedLetter:"_",init:function(){masking.setUpMasks(masking.maskedInputs),masking.maskedInputs=document.querySelectorAll(".masked"),masking.activateMasking(masking.maskedInputs)},setUpMasks:function(e){let t,a=e.length;for(t=0;t<a;t++)masking.createShell(e[t])},createShell:function(e){let t=document.createElement("span"),a=e.getAttribute("placeholder"),s=e.parentNode;e.setAttribute("maxlength",a.length),e.setAttribute("data-placeholder",a),e.removeAttribute("placeholder"),t.classList.add("shell");let i='<span aria-hidden="true" id="'+e.id+'Mask"><i></i>'+a+"</span>";t.innerHTML=i,s.insertBefore(t,e),t.appendChild(e)},setValueOfMask:function(e){let t=e.target.value;return"<i>"+t+"</i>"+e.target.getAttribute("data-placeholder").substr(t.length)},activateMasking:function(e){let t,a;for(t=0,a=e.length;t<a;t++)masking.maskedInputs[t].addEventListener("keyup",(function(e){masking.handleValueChange(e)}),!1)},handleValueChange:function(e){let t=e.target.getAttribute("id");switch(e.keyCode){case 20:case 17:case 18:case 16:case 37:case 38:case 39:case 40:case 9:return}document.getElementById(t).value=masking.handleCurrentValue(e),document.getElementById(t+"Mask").innerHTML=masking.setValueOfMask(e)},handleCurrentValue:function(e){let t,a,s,i,n,r,o,l=e.target.getAttribute("data-charset"),d=l||e.target.getAttribute("data-placeholder"),m=e.target.value,c=d.length,u="";for(n=l?m.replace(/\W/g,""):m.replace(/\D/g,""),t=0,a=0;t<c;t++){if(s=!isNaN(parseInt(n[a])),i=!!n[a]&&n[a].match(/[A-Z]/i),r=masking.maskedNumber.indexOf(d[t])>=0,o=masking.maskedLetter.indexOf(d[t])>=0,r&&s||l&&o&&i)u+=n[a++];else{if(!l&&!s&&r||l&&(o&&!i||r&&!s))return u;u+=d[t]}if(null==n[a])break}return e.target.getAttribute("data-valid-example")?masking.validateProgress(e,u):u},validateProgress:function(e,t){let a=e.target.getAttribute("data-valid-example"),s=new RegExp(e.target.getAttribute("pattern")),i=e.target.getAttribute("data-placeholder"),n=t.length,r="";if(1==n&&"MM"==i.toUpperCase().substr(0,2))return t>1&&t<10&&(t="0"+t),t;for(let e=n;e>=0;e--){if(r=t+a.substr(t.length),s.test(r))return t;t=t.substr(0,t.length-1)}return t},errorOnKeyEntry:function(){}};const track=(e,t)=>{if("undefined"!=typeof ga){switch(ga("set","transport","beacon"),e){case 200:track200(t);break;case 201:track201(t);break;case 422:track422(t);break;case 400:track400(t)}trackWarnings(t)}},track200=e=>{const t=e.Errors&&e.Errors.length>0;if(t&&"Duplicate"==e.Errors[0].Key)track400(e);else{if(!t)return e.IsLeadAccepted?void track201(e):void track422(e);track422(e)}},track201=e=>{fireEvent("PA Lead submit","Lead Success")},track422=e=>{e.Errors&&e.Errors[0].Key&&fireEvent("PA Lead submit","Lead invalid")},track400=e=>{e.Errors&&e.Errors[0].Key&&fireEvent("PA Lead submit","Lead Duplicate")},trackWarnings=e=>{e.Warnings&&null!=e.Warnings&&fireEvent("PA Lead submit warning",e.Warnings[0].Value)},fireEvent=(e,t,a)=>{if("ga"in window){let s=ga.getAll()[0];s?(a||(a=getGAClientId()),s.send("event",e,t,a),"PA Lead submit warning"==e?setWarningCookie(t,a):setCookie("ws3leadSubmit",t+" || "+a,43200)):console.log("No GA Tracker, cannot send event.")}else console.log("No GA Object, cannot send event.")},getGAClientId=()=>{var e="NULL";if("undefined"!=typeof ga)try{ga.getAll().forEach(t=>{var a=t.get("clientId");a&&(e=a)})}catch(e){console.log(e)}return e},setCookie=(e,t,a)=>{var s=new Date;s.setTime(s.getTime()+60*a*1e3);var i="expires="+s.toUTCString();let n=window.location.hostname;window.location.hostname.indexOf(".")!=window.location.hostname.lastIndexOf(".")&&(n=window.location.hostname.slice(window.location.hostname.indexOf(".")));let r=e+"="+t+";"+i+";domain="+n+";path=/";document.cookie=r},readCookie=e=>{e=e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");var t=new RegExp("(?:^|;)\\s?"+e+"=(.*?)(?:;|$)","i"),a=document.cookie.match(t);return a&&decodeURI(a[1])},countCookiesRegex=e=>{e=e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");var t=new RegExp("(?:^|;)?\\s?"+e+"\\d?=(.*?)(?:;|$)","gmi");return document.cookie.match(t).length},setWarningCookie=(e,t)=>{let a=1,s=0;s=countCookiesRegex("ws3leadSubmitWarning"),setCookie("ws3leadSubmitWarning"+(a=s%3+1),e+" || "+t,43200)};class Validator{static validators(e){return{location:e=>e?{valid:!0,message:"Success"}:{valid:!1,message:this.validation_messages("empty_location")},name:e=>{return e?e.match(/[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/g)?{valid:!0,message:"Success"}:{valid:!1,message:this.validation_messages("invalid_name")}:{valid:!1,message:this.validation_messages("empty_name")}},email:e=>{return e?e.match(/[\w\+\._-]+@[\w]+(?:\.[\w]{2,})+/g)?{valid:!0,message:"Success"}:{valid:!1,message:this.validation_messages("invalid_email")}:{valid:!1,message:this.validation_messages("empty_email")}},phone:e=>{return e?e.match(/^(1[-\s\.]?)?(\([2-9]\d{2}\)[\s\.-]?|[2-9]\d{2})[-\s\.]?[2-9]\d{2}[\.\s-]?\d{4}$/g)?{valid:!0,message:"Success"}:{valid:!1,message:this.validation_messages("invalid_phone")}:{valid:!1,message:this.validation_messages("empty_phone")}}}[e]}static validation_messages(e){return{empty_location:"Please enter your a location.",empty_name:"Please enter your full name.",invalid_name:"Please enter a valid name.",empty_email:"Please enter your email.",invalid_email:"Please enter a valid email.",empty_phone:"Please enter your phone number.",invalid_phone:"Please enter a valid phone number."}[e]}constuctor(){}static validateField(e){let t=e.dataset.validator,a=e.value;return this.validators(t)(a)}static validateForm(e){let t={valid:!0,messages:[]},a=e.getElementsByClassName("leadFormInput");for(let e=0;e<a.length;e++){let s=a[e],i=this.validateField(s);i.valid||(t.valid=!1,t.messages.push(i.message))}return t}}Array.prototype.merge=(e,t)=>{for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e};const by_id=e=>document.getElementById(e),hideErrors=e=>{e.classList.remove("error");let t=e.labels[0].getElementsByClassName("errorLabel")[0];t.innerHTML="",t.style.display="none"},showErrors=(e,t)=>{e.classList.add("error");let a=e.labels[0].getElementsByClassName("errorLabel")[0];a.innerHTML=t,a.style.display="inline-block"},reportWS3Errors=(e,t=!1)=>{console.log(e)},validityTest=e=>{let t=Validator.validateField(e.target);return t.valid?(hideErrors(e.target),!1):(showErrors(e.target,t.message),!0)},parseNameField=e=>{let t=by_id(e);if(t=t.value?t.value.trim():""){if(/\s/.test(t)){let e=t.split(" "),a=e[0],s=e[1];if(e.length>2){let t=[];s=(t=e.slice(1)).join(" ")}return{firstName:a,lastName:s}}return{firstName:t,lastName:""}}return{firstName:"",lastName:""}},post=(e,t)=>{delete e.SuccessMessage;let a=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&"),s=`${WP.leadProxy}?${a}`,i=createCORSRequest("POST",s);i.send(),i.onerror=e=>{reportWS3Errors(`Oops, there was an error: ${JSON.stringify(e)}`),e.isTrusted&&(reportWS3Errors("Likely a cross domain origin problem won't\n                let us save your information.\n                Please try again later."),console.log(e))},i.onload=e=>{let t=window.submitedForm.parentNode;t.classList.remove("loading");let a=JSON.parse(i.response.trim()),s=a.Errors&&a.Errors.length>0;a.IsLeadAccepted;a.message&&void 0!==a.message&&reportWS3Errors(a.message);try{track(i.status,a)}catch(e){console.log(e)}if(s&&"Duplicate"!=a.Errors[0].Key&&a.Errors[0].Value&&void 0!==a.Errors[0].Value&&reportWS3Errors(JSON.stringify(a.Errors[0].Value)),setCookie("showPricing",1,43200),void 0!==window.lighthouse_cptparams[window.submitedFormId].SuccessMessage&&window.lighthouse_cptparams[window.submitedFormId].SuccessMessage){let e=window.lighthouse_cptparams[window.submitedFormId].SuccessMessage;void 0!==window.lighthouse_cptparams[window.submitedFormId].RedirectUrl&&window.lighthouse_cptparams[window.submitedFormId].RedirectUrl&&(e+='<div style="text-align:center">Redirecting please wait...<div class="lds-ring"><div></div><div></div><div></div><div></div></div></div>');let a=document.createElement("div");a.classList.add("success-message"),a.innerHTML=e,t.removeChild(window.submitedForm),t.appendChild(a)}if(void 0!==window.lighthouse_cptparams[window.submitedFormId].RedirectUrl&&window.lighthouse_cptparams[window.submitedFormId].RedirectUrl){let e=window.lighthouse_cptparams[window.submitedFormId].RedirectUrl;0!=e.indexOf("http")&&0!=e.indexOf("/")&&(e="/"+e);let t=window.lighthouse_cptparams[window.submitedFormId].RedirectTimer?window.lighthouse_cptparams[window.submitedFormId].RedirectTimer:5;setTimeout((function(){document.location=e}),1e3*t)}}},initAutocomplete=()=>{let e={types:["geocode"],componentRestrictions:{country:["us","ca"]}};const t=document.getElementsByClassName("locationField");for(let a=0;a<t.length;a++){let s=t[a],i=new google.maps.places.Autocomplete(s,e);i.setFields(["address_component","geometry"]),google.maps.event.addListener(i,"place_changed",(function(){var e=this.getPlace();fillInAddress(e,s)}))}},getAddressComponent=e=>{let t={};for(let a=0;a<e.length;a++)e[a].types&&e[a].types.includes("administrative_area_level_1")&&(t.state=e[a].short_name,t.state_long=e[a].long_name),e[a].types&&e[a].types.includes("locality")&&(t.city=e[a].long_name),e[a].types&&e[a].types.includes("postal_code")&&(t.zip=e[a].long_name),e[a].types&&e[a].types.includes("country")&&(t.country=e[a].short_name);return t},fillInAddress=(e,t)=>{let a=t.form;if(e&&void 0!==e.address_components){window.geocompleted=!0;let t=getAddressComponent(e.address_components),s=a.getElementsByTagName("input");for(let a=0;a<s.length;a++){let i=s[a];"DesiredCity"===i.name?i.value=t.city:"DesiredState"===i.name?i.value=t.state:"DesiredZip"===i.name?void 0!==t.zip&&(i.value=t.zip):"lat"===i.name?i.value=e.geometry.location.lat():"lng"===i.name?i.value=e.geometry.location.lng():"DesiredCountry"===i.name&&(i.value=t.country)}}else if(t.value){window.geocompleted=!1;let e=t.value.trim();const s=/((\d{5}-\d{4})|(\d{5})|([A-Za-z]\d[A-Za-z]\s?\d[A-Za-z]\d))/gm;let i="";if(e.match(s)){i=s.exec(e)[0],e=(e=e.replace(i,"")).trim()}let n="",r="";if(e){let t=e.split(",");n=t[0].trim(),t.length>1&&(r=t[1].trim())}let o=a.getElementsByTagName("input");for(let e=0;e<o.length;e++){let t=o[e];"DesiredCity"===t.name?t.value=n:"DesiredState"===t.name?t.value=r:"DesiredZip"===t.name&&(t.value=i)}if(a.parentNode.classList.contains("lighthouse-cpt-location-two-step")){let e=a.getElementsByClassName("step1")[0],t=a.getElementsByClassName("step2")[0];e.style.display="none",t.style.display="block"}}},onSubmit=e=>{e.preventDefault();const t=e.target;if(window.submitedForm=t,window.submitedFormId=t.dataset.nsFormid,t.parentNode.classList.add("loading"),null==t)return void console.log("No Lighthouse CPT form found on page.");var a={};if(!t.checkValidity())return;let s=t.dataset.paFormid,i=t.dataset.paFormtype,n=t.dataset.paTechstack,r=t.dataset.paVersion,o=window.lighthouse_cptparams[window.submitedFormId].form_location;setCookie("data-pa-formid",s,3),setCookie("data-pa-formtype",i,3),setCookie("data-pa-techstack",n,3),setCookie("data-pa-version",r,3),setCookie("form-location",o,3);for(var l=t.getElementsByTagName("input"),d=0;d<l.length;d++)a[l[d].name]=l[d].value;window.lighthouse_cptparams[window.submitedFormId]&&Array.isArray(window.lighthouse_cptparams[window.submitedFormId])&&(a=[].merge(a,window.lighthouse_cptparams[window.submitedFormId]));let m=parseNameField("leadFormFullname"+window.submitedFormId);a.FirstName=m.firstName,a.LastName=m.lastName,a.GoogleClientId=getGAClientId(),a.xhr=!0,post(a)},createCORSRequest=(e,t)=>{var a=new XMLHttpRequest;return"withCredentials"in a?a.open(e,t,!0):"undefined"!=typeof XDomainRequest?(a=new XDomainRequest).open(e,t):a=null,a},onLoad=()=>{window.geocompleted=!1;let e=document.getElementsByClassName("LeadForm");if(null!=e){for(let t=0;t<e.length;t++){let a=e[t];a.addEventListener("submit",onSubmit);const s=a.getElementsByClassName("leadFormInput");for(let e=0;e<s.length;e++){s[e].addEventListener("blur",validityTest)}a.parentNode.classList.contains("lighthouse-cpt-location-two-step")&&(a.getElementsByClassName("form-next")[0].addEventListener("click",(function(e){if(!window.geocompleted){let e=a.getElementsByClassName("locationField")[0];fillInAddress(!1,e)}let t=a.getElementsByClassName("step1")[0],s=a.getElementsByClassName("step2")[0];t.style.display="none",s.style.display="block"})),a.parentNode.classList.add("hasjs"))}initAutocomplete(),masking.init()}else console.log('Did not wire up. No form with the class "LeadForm" found.')};onLoad();